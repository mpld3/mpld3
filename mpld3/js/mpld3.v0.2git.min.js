!function(t){function o(t,o){t="undefined"!=typeof t?t:10,o="undefined"!=typeof o?o:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var s="",i=0;t>i;i++)s+=o.charAt(Math.round(Math.random()*(o.length-1)));return s}function s(o,s){var i=t.interpolate([o[0].valueOf(),o[1].valueOf()],[s[0].valueOf(),s[1].valueOf()]);return function(t){var o=i(t);return[new Date(o[0]),new Date(o[1])]}}function i(t){return"undefined"==typeof t}function e(t){return null==t||i(t)}function r(t,o){return t.length>0?t[o%t.length]:null}function a(){function o(o,a){var n=t.functor(s),p=t.functor(i),h=[],l=[],c=0,d=-1,f=0,u=!1;if(!a){a=["M"];for(var y=1;y<o.length;y++)a.push("L")}for(;++d<a.length;){for(f=c+r[a[d]],h=[];f>c;)e.call(this,o[c],c)?(h.push(n.call(this,o[c],c),p.call(this,o[c],c)),c++):(h=null,c=f);h?u&&h.length>0?(l.push("M",h[0],h[1]),u=!1):(l.push(a[d]),l=l.concat(h)):u=!0}return c!=o.length&&console.warn("Warning: not all vertices used in Path"),l.join(" ")}var s=function(t){return t[0]},i=function(t){return t[1]},e=function(){return!0},r={M:1,m:1,L:1,l:1,Q:2,q:2,T:1,t:1,S:2,s:2,C:3,c:3,Z:0,z:0};return o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(i=t,o):i},o.defined=function(t){return arguments.length?(e=t,o):e},o.call=o,o}function n(t,o){if(v.call(this,t,o),this.cssclass="mpld3-"+this.props.xy+"grid","x"==this.props.xy)this.transform="translate(0,"+this.ax.height+")",this.position="bottom",this.scale=this.ax.xdom,this.tickSize=-this.ax.height;else{if("y"!=this.props.xy)throw"unrecognized grid xy specifier: should be 'x' or 'y'";this.transform="translate(0,0)",this.position="left",this.scale=this.ax.ydom,this.tickSize=-this.ax.width}}function p(t,o){v.call(this,t,o);var s={bottom:[0,this.ax.height],top:[0,0],left:[0,0],right:[this.ax.width,0]},i={bottom:"x",top:"x",left:"y",right:"y"};this.transform="translate("+s[this.props.position]+")",this.props.xy=i[this.props.position],this.cssclass="mpld3-"+this.props.xy+"axis",this.scale=this.ax[this.props.xy+"dom"]}function h(t,o){if("undefined"==typeof o){if(this.ax=null,this.fig=null,"display"!==this.trans)throw"ax must be defined if transform != 'display'"}else this.ax=o,this.fig=o.fig;if(this.zoomable="data"===t,this.x=this["x_"+t],this.y=this["y_"+t],"undefined"==typeof this.x||"undefined"==typeof this.y)throw"unrecognized coordinate code: "+t}function l(t,o){v.call(this,t,o),this.data=t.fig.get_data(this.props.data),this.pathcodes=this.props.pathcodes,this.pathcoords=new h(this.props.coordinates,this.ax),this.offsetcoords=new h(this.props.offsetcoordinates,this.ax),this.datafunc=a()}function c(t,o){v.call(this,t,o),this.paths=this.props.paths,(null==this.props.facecolors||0==this.props.facecolors.length)&&(this.props.facecolors=["none"]),(null==this.props.edgecolors||0==this.props.edgecolors.length)&&(this.props.edgecolors=["none"]);var s=this.ax.fig.get_data(this.props.offsets);(null===s||0===s.length)&&(s=[null]);var i=Math.max(this.props.paths.length,s.length);if(s.length===i)this.offsets=s;else{this.offsets=[];for(var e=0;i>e;e++)this.offsets.push(r(s,e))}this.pathcoords=new h(this.props.pathcoordinates,this.ax),this.offsetcoords=new h(this.props.offsetcoordinates,this.ax)}function d(o,s){v.call(this,o,s),pathProps=this.props,pathProps.facecolor="none",pathProps.edgecolor=pathProps.color,delete pathProps.color,pathProps.edgewidth=pathProps.linewidth,delete pathProps.linewidth,this.defaultProps=l.prototype.defaultProps,l.call(this,o,pathProps),this.datafunc=t.svg.line().interpolate("linear")}function f(o,s){v.call(this,o,s),this.marker=null!==this.props.markerpath?0==this.props.markerpath[0].length?null:A.path().call(this.props.markerpath[0],this.props.markerpath[1]):null===this.props.markername?null:t.svg.symbol(this.props.markername).size(Math.pow(this.props.markersize,2)),PCprops={paths:[this.markerpath],offsets:o.fig.get_data(this.props.data),xindex:this.props.xindex,yindex:this.props.yindex,offsetcoordinates:this.props.coordinates,edgecolors:[this.props.edgecolor],edgewidths:[this.props.edgewidth],facecolors:[this.props.facecolor],alphas:[this.props.alpha],zorder:this.props.zorder,id:this.props.id},this.requiredProps=c.prototype.requiredProps,this.defaultProps=c.prototype.defaultProps,c.call(this,o,PCprops)}function u(t,o){v.call(this,t,o),this.coords=new h(this.props.coordinates,this.ax)}function y(t,o){v.call(this,t,o),this.text=this.props.text,this.position=this.props.position,this.coords=new h(this.props.coordinates,this.ax)}function m(o,s){function i(t){return new Date(t[0],t[1],t[2],t[3],t[4],t[5])}function e(t,o){return"date"!==t?o:[i(o[0]),i(o[1])]}function r(o,s,i){var e="date"===o?t.time.scale():"log"===o?t.scale.log():t.scale.linear();return e.domain(s).range(i)}v.call(this,o,s),this.axnum=this.fig.axes.length,this.axid=this.fig.figid+"_ax"+(this.axnum+1),this.clipid=this.axid+"_clip",this.props.xdomain=this.props.xdomain||this.props.xlim,this.props.ydomain=this.props.ydomain||this.props.ylim,this.sharex=[],this.sharey=[],this.elements=[];var a=this.props.bbox;this.position=[a[0]*this.fig.width,(1-a[1]-a[3])*this.fig.height],this.width=a[2]*this.fig.width,this.height=a[3]*this.fig.height,this.props.xdomain=e(this.props.xscale,this.props.xdomain),this.props.ydomain=e(this.props.yscale,this.props.ydomain),this.x=this.xdom=r(this.props.xscale,this.props.xdomain,[0,this.width]),this.y=this.ydom=r(this.props.yscale,this.props.ydomain,[this.height,0]),"date"===this.props.xscale&&(this.xdatemap=r(this.props.xscale,this.props.xdomain,this.props.xlim),this.x=function(t){return this.xdom(this.xdatemap.invert(t))}),"date"===this.props.yscale&&(this.ydatemap=r(this.props.yscale,this.props.ydomain,this.props.ylim),this.y=function(t){return this.ydom(this.ydatemap.invert(t))});for(var n=this.props.axes,p=0;p<n.length;p++){var h=new A.Axis(this,n[p]);this.elements.push(h),(this.props.gridOn||h.props.grid.gridOn)&&this.elements.push(h.getGrid())}for(var l=this.props.paths,p=0;p<l.length;p++)this.elements.push(new A.Path(this,l[p]));for(var c=this.props.lines,p=0;p<c.length;p++)this.elements.push(new A.Line(this,c[p]));for(var d=this.props.markers,p=0;p<d.length;p++)this.elements.push(new A.Markers(this,d[p]));for(var f=this.props.texts,p=0;p<f.length;p++)this.elements.push(new A.Text(this,f[p]));for(var u=this.props.collections,p=0;p<u.length;p++)this.elements.push(new A.PathCollection(this,u[p]));for(var y=this.props.images,p=0;p<y.length;p++)this.elements.push(new A.Image(this,y[p]));this.elements.sort(function(t,o){return t.props.zorder-o.props.zorder})}function g(t,o){v.call(this,t,o),this.buttons=[],this.props.buttons.forEach(this.addButton.bind(this))}function x(t,o){v.call(this,t),this.toolbar=t,this.cssclass="mpld3-"+o+"button",this.active=!1}function b(o,s){v.call(this,null,s),this.figid=o,this.width=this.props.width,this.height=this.props.height,this.data=this.props.data,this.root=t.select("#"+o).append("div").style("position","relative"),this.axes=[];for(var i=0;i<this.props.axes.length;i++)this.axes.push(new m(this,this.props.axes[i]));this.plugins=[];for(var i=0;i<this.props.plugins.length;i++)this.add_plugin(this.props.plugins[i]);this.toolbar=new A.Toolbar(this,{buttons:this.props.toolbar})}function v(t,o){this.parent=t,"undefined"!=typeof o&&(this.props=this.processProps(o)),this.fig=t instanceof b?t:t&&"fig"in t?t.fig:null,this.ax=t instanceof m?t:t&&"ax"in t?t.ax:null}function z(t,o){v.call(this,t,o)}var A={figures:[],plugin_map:{},register_plugin:function(t,o){A.plugin_map[t]=o}};A.version="0.2git",A.draw_figure=function(t,o){var s=document.getElementById(t);if(null===s)throw t+" is not a valid id";var i=new A.Figure(t,o);return A.figures.push(i),i.draw(),i},A.merge_objects=function(){for(var t,o={},s=0;s<arguments.length;s++){t=arguments[s];for(var i in t)o[i]=t[i]}return o},A.generate_id=function(t,s){return console.warn("mpld3.generate_id is deprecated. Use mpld3.generateId instead."),o(t,s)},A.generateId=o,A.get_element=function(t,o){var s,i,e;s="undefined"==typeof o?A.figures:"undefined"==typeof o.length?[o]:o;for(var r=0;r<s.length;r++){if(o=s[r],o.props.id===t)return o;for(var a=0;a<o.axes.length;a++){if(i=o.axes[a],i.props.id===t)return i;for(var n=0;n<i.elements.length;n++)if(e=i.elements[n],e.props.id===t)return e}}return null},A.insert_css=function(t,o){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),e=t+" {";for(var r in o)e+=r+":"+o[r]+"; ";e+="}",i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e)),s.appendChild(i)},A.process_props=function(t,o,s,i){function e(t){v.call(this,null,t)}console.warn("mpld3.process_props is deprecated. Plot elements should derive from mpld3.PlotElement"),e.prototype=Object.create(v.prototype),e.prototype.constructor=e,e.prototype.requiredProps=i,e.prototype.defaultProps=s;var r=new e(o);return r.props},A.interpolateDates=s,A.path=function(){return a()},A.icons={reset:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBI\nWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gIcACMoD/OzIwAAAJhJREFUOMtjYKAx4KDUgNsMDAx7\nyNV8i4GB4T8U76VEM8mGYNNMtCH4NBM0hBjNMIwSsMzQ0MamcDkDA8NmQi6xggpUoikwQbIkHk2u\nE0rLI7vCBknBSyxeRDZAE6qHgQkq+ZeBgYERSfFPAoHNDNUDN4BswIRmKgxwEasP2dlsDAwMYlA/\n/mVgYHiBpkkGKscIDaPfVMmuAGnOTaGsXF0MAAAAAElFTkSuQmCC\n",move:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBI\nWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gIcACQMfLHBNQAAANZJREFUOMud07FKA0EQBuAviaKB\nlFr7COJrpAyYRlKn8hECEkFEn8ROCCm0sBMRYgh5EgVFtEhsRjiO27vkBoZd/vn5d3b+XcrjFI9q\nxgXWkc8pUjOB93GMd3zgB9d1unjDSxmhWSHQqOJki+MtOuv/b3ZifUqctIrMxwhHuG1gim4Ma5kR\nWuEkXFgU4B0MW1Ho4TeyjX3s4TDq3zn8ALvZ7q5wX9DqLOHCDA95cFBAnOO1AL/ZdNopgY3fQcqF\nyriMe37hM9w521ZkkvlMo7o/8g7nZYQ/QDctp1nTCf0AAAAASUVORK5CYII=\n"},A.Grid=n,n.prototype=Object.create(v.prototype),n.prototype.constructor=n,n.prototype.requiredProps=["xy"],n.prototype.defaultProps={color:"gray",dasharray:"2,2",alpha:"0.5",nticks:10,gridOn:!0,tickvalues:null,zorder:0},n.prototype.draw=function(){this.grid=t.svg.axis().scale(this.scale).orient(this.position).ticks(this.props.nticks).tickValues(this.props.tickvalues).tickSize(this.tickSize,0,0).tickFormat(""),this.elem=this.ax.axes.append("g").attr("class",this.cssclass).attr("transform",this.transform).call(this.grid),A.insert_css("div#"+this.ax.fig.figid+" ."+this.cssclass+" .tick",{stroke:this.props.color,"stroke-dasharray":this.props.dasharray,"stroke-opacity":this.props.alpha}),A.insert_css("div#"+this.ax.fig.figid+" ."+this.cssclass+" path",{"stroke-width":0})},n.prototype.zoomed=function(){this.elem.call(this.grid)},A.Axis=p,p.prototype=Object.create(v.prototype),p.prototype.constructor=p,p.prototype.requiredProps=["position"],p.prototype.defaultProps={nticks:10,tickvalues:null,tickformat:null,fontsize:"11px",fontcolor:"black",axiscolor:"black",scale:"linear",grid:{},zorder:0},p.prototype.getGrid=function(){var t={nticks:this.props.nticks,zorder:this.props.zorder,tickvalues:this.props.tickvalues,xy:this.props.xy};if(this.props.grid)for(var o in this.props.grid)t[o]=this.props.grid[o];return new n(this.ax,t)},p.prototype.draw=function(){this.axis=t.svg.axis().scale(this.scale).orient(this.props.position).ticks(this.props.nticks).tickValues(this.props.tickvalues).tickFormat(this.props.tickformat),this.elem=this.ax.baseaxes.append("g").attr("transform",this.transform).attr("class",this.cssclass).call(this.axis),A.insert_css("div#"+this.ax.fig.figid+" ."+this.cssclass+" line,  ."+this.cssclass+" path",{"shape-rendering":"crispEdges",stroke:this.props.axiscolor,fill:"none"}),A.insert_css("div#"+this.ax.fig.figid+" ."+this.cssclass+" text",{"font-family":"sans-serif","font-size":this.props.fontsize,fill:this.props.fontcolor,stroke:"none"})},p.prototype.zoomed=function(){this.elem.call(this.axis)},A.Coordinates=h,h.prototype.xy=function(t,o,s){return o="undefined"==typeof o?0:o,s="undefined"==typeof s?1:s,[this.x(t[o]),this.y(t[s])]},h.prototype.x_data=function(t){return this.ax.x(t)},h.prototype.y_data=function(t){return this.ax.y(t)},h.prototype.x_display=function(t){return t},h.prototype.y_display=function(t){return t},h.prototype.x_axes=function(t){return t*this.ax.width},h.prototype.y_axes=function(t){return this.ax.height*(1-t)},h.prototype.x_figure=function(t){return t*this.fig.width-this.ax.position[0]},h.prototype.y_figure=function(t){return(1-t)*this.fig.height-this.ax.position[1]},A.Path=l,l.prototype=Object.create(v.prototype),l.prototype.constructor=l,l.prototype.requiredProps=["data"],l.prototype.defaultProps={xindex:0,yindex:1,coordinates:"data",facecolor:"green",edgecolor:"black",edgewidth:1,dasharray:"10,0",pathcodes:null,offset:null,offsetcoordinates:"data",alpha:1,zorder:1},l.prototype.nanFilter=function(t){return!isNaN(t[this.props.xindex])&&!isNaN(t[this.props.yindex])},l.prototype.draw=function(){if(this.datafunc.defined(this.nanFilter.bind(this)).x(function(t){return this.pathcoords.x(t[this.props.xindex])}).y(function(t){return this.pathcoords.y(t[this.props.yindex])}),this.path=this.ax.axes.append("svg:path").attr("d",this.datafunc(this.data,this.pathcodes)).attr("class","mpld3-path").style("stroke",this.props.edgecolor).style("stroke-width",this.props.edgewidth).style("stroke-dasharray",this.props.dasharray).style("stroke-opacity",this.props.alpha).style("fill",this.props.facecolor).style("fill-opacity",this.props.alpha).attr("vector-effect","non-scaling-stroke"),null!==this.props.offset){var t=this.offsetcoords.xy(this.props.offset);this.path.attr("transform","translate("+t+")")}},l.prototype.elements=function(){return this.path},l.prototype.zoomed=function(){if(this.pathcoords.zoomable&&this.path.attr("d",this.datafunc(this.data,this.pathcodes)),null!==this.props.offset&&this.offsetcoords.zoomable){var t=this.offsetcoords.xy(this.props.offset);this.path.attr("transform","translate("+t+")")}},A.PathCollection=c,c.prototype=Object.create(v.prototype),c.prototype.constructor=c,c.prototype.requiredProps=["paths","offsets"],c.prototype.defaultProps={xindex:0,yindex:1,pathtransforms:[],pathcoordinates:"display",offsetcoordinates:"data",offsetorder:"before",edgecolors:["#000000"],edgewidths:[1],facecolors:["#0000FF"],alphas:[1],zorder:2},c.prototype.transformFunc=function(o,s){var i=this.props.pathtransforms,e=0==i.length?"":t.transform("matrix("+r(i,s)+")").toString(),a=null===o||"undefined"==typeof o?"translate(0, 0)":"translate("+this.offsetcoords.xy(o,this.props.xindex,this.props.yindex)+")";return"after"===this.props.offsetorder?e+a:a+e},c.prototype.pathFunc=function(t,o){return a().x(function(t){return this.pathcoords.x(t[0])}.bind(this)).y(function(t){return this.pathcoords.y(t[1])}.bind(this)).apply(this,r(this.paths,o))},c.prototype.styleFunc=function(t,o){var s={stroke:r(this.props.edgecolors,o),"stroke-width":r(this.props.edgewidths,o),"stroke-opacity":r(this.props.alphas,o),fill:r(this.props.facecolors,o),"fill-opacity":r(this.props.alphas,o)},i="";for(key in s)i+=key+":"+s[key]+";";return i},c.prototype.draw=function(){this.group=this.ax.axes.append("svg:g"),this.pathsobj=this.group.selectAll("paths").data(this.offsets).enter().append("svg:path").attr("d",this.pathFunc.bind(this)).attr("class","mpld3-path").attr("transform",this.transformFunc.bind(this)).attr("style",this.styleFunc.bind(this)).attr("vector-effect","non-scaling-stroke")},c.prototype.elements=function(){return this.group.selectAll("path")},c.prototype.zoomed=function(){"data"===this.props.pathcoordinates&&this.pathsobj.attr("d",this.pathFunc.bind(this)),"data"===this.props.offsetcoordinates&&this.pathsobj.attr("transform",this.transformFunc.bind(this))},A.Line=d,d.prototype=Object.create(l.prototype),d.prototype.constructor=d,d.prototype.requiredProps=["data"],d.prototype.defaultProps={xindex:0,yindex:1,coordinates:"data",color:"salmon",linewidth:2,dasharray:"10,0",alpha:1,zorder:2},A.Markers=f,f.prototype=Object.create(c.prototype),f.prototype.constructor=f,f.prototype.requiredProps=["data"],f.prototype.defaultProps={xindex:0,yindex:1,coordinates:"data",facecolor:"salmon",edgecolor:"black",edgewidth:1,alpha:1,markersize:6,markername:"circle",markerpath:null,zorder:3},f.prototype.pathFunc=function(){return this.marker},A.Image=u,u.prototype=Object.create(v.prototype),u.prototype.constructor=u,u.prototype.requiredProps=["data","extent"],u.prototype.defaultProps={alpha:1,coordinates:"data",zorder:1},u.prototype.draw=function(){this.image=this.ax.axes.append("svg:image").attr("class","mpld3-image").attr("xlink:href","data:image/png;base64,"+this.props.data).style({opacity:this.props.alpha}).attr("preserveAspectRatio","none"),this.zoomed()},u.prototype.elements=function(){return t.select(this.image)},u.prototype.zoomed=function(){var t=this.props.extent;this.image.attr("x",this.coords.x(t[0])).attr("y",this.coords.y(t[3])).attr("width",this.coords.x(t[1])-this.coords.x(t[0])).attr("height",this.coords.y(t[2])-this.coords.y(t[3]))},A.Text=y,y.prototype=Object.create(v.prototype),y.prototype.constructor=y,y.prototype.requiredProps=["text","position"],y.prototype.defaultProps={coordinates:"data",h_anchor:"start",v_baseline:"auto",rotation:0,fontsize:11,color:"black",alpha:1,zorder:3},y.prototype.draw=function(){this.obj="data"==this.props.coordinates?this.ax.axes.append("text"):this.ax.baseaxes.append("text"),this.obj.attr("class","mpld3-text").text(this.text).style("text-anchor",this.props.h_anchor).style("dominant-baseline",this.props.v_baseline).style("font-size",this.props.fontsize).style("fill",this.props.color).style("opacity",this.props.alpha),this.applyTransform()},y.prototype.elements=function(){return t.select(this.obj)},y.prototype.applyTransform=function(){var t=this.coords.xy(this.position);this.obj.attr("x",t[0]).attr("y",t[1]),this.props.rotation&&this.obj.attr("transform","rotate("+this.props.rotation+","+t+")")},y.prototype.zoomed=function(){this.coords.zoomable&&this.applyTransform()},A.Axes=m,m.prototype=Object.create(v.prototype),m.prototype.constructor=m,m.prototype.requiredProps=["xlim","ylim"],m.prototype.defaultProps={bbox:[.1,.1,.8,.8],axesbg:"#FFFFFF",axesbgalpha:1,gridOn:!1,xdomain:null,ydomain:null,xscale:"linear",yscale:"linear",zoomable:!0,axes:[{position:"left"},{position:"bottom"}],grids:[],xgridprops:{},ygridprops:{},lines:[],paths:[],markers:[],texts:[],collections:[],sharex:[],sharey:[],images:[]},m.prototype.draw=function(){for(var o=0;o<this.props.sharex.length;o++)this.sharex.push(A.get_element(this.props.sharex[o]));for(var o=0;o<this.props.sharey.length;o++)this.sharey.push(A.get_element(this.props.sharey[o]));this.zoom=t.behavior.zoom(),this.zoom.last_t=this.zoom.translate(),this.zoom.last_s=this.zoom.scale(),this.zoom_x=t.behavior.zoom().x(this.xdom),this.zoom_y=t.behavior.zoom().y(this.ydom),this.baseaxes=this.fig.canvas.append("g").attr("transform","translate("+this.position[0]+","+this.position[1]+")").attr("width",this.width).attr("height",this.height).attr("class","mpld3-baseaxes"),this.clip=this.baseaxes.append("svg:clipPath").attr("id",this.clipid).append("svg:rect").attr("x",0).attr("y",0).attr("width",this.width).attr("height",this.height),this.axes=this.baseaxes.append("g").attr("class","mpld3-axes").attr("clip-path","url(#"+this.clipid+")"),this.axesbg=this.axes.append("svg:rect").attr("width",this.width).attr("height",this.height).attr("class","mpld3-axesbg").style("fill",this.props.axesbg).style("fill-opacity",this.props.axesbgalpha);for(var o=0;o<this.elements.length;o++)this.elements[o].draw()},m.prototype.enable_zoom=function(){this.props.zoomable&&(this.zoom.on("zoom",this.zoomed.bind(this,!0)),this.axes.call(this.zoom),this.axes.style("cursor","move"))},m.prototype.disable_zoom=function(){this.props.zoomable&&(this.zoom.on("zoom",null),this.axes.on(".zoom",null),this.axes.style("cursor",null))},m.prototype.zoomed=function(t){if(t="undefined"==typeof t?!0:t){var o=this.zoom.translate()[0]-this.zoom.last_t[0],s=this.zoom.translate()[1]-this.zoom.last_t[1],i=this.zoom.scale()/this.zoom.last_s;this.zoom_x.translate([this.zoom_x.translate()[0]+o,0]),this.zoom_x.scale(this.zoom_x.scale()*i),this.zoom_y.translate([0,this.zoom_y.translate()[1]+s]),this.zoom_y.scale(this.zoom_y.scale()*i),this.zoom.last_t=this.zoom.translate(),this.zoom.last_s=this.zoom.scale(),this.sharex.forEach(function(t){t.zoom_x.translate(this.zoom_x.translate()).scale(this.zoom_x.scale())}.bind(this)),this.sharey.forEach(function(t){t.zoom_y.translate(this.zoom_y.translate()).scale(this.zoom_y.scale())}.bind(this)),this.sharex.forEach(function(t){t.zoomed(!1)}),this.sharey.forEach(function(t){t.zoomed(!1)})}for(var e=0;e<this.elements.length;e++)this.elements[e].zoomed()},m.prototype.reset=function(t,o){this.set_axlim(this.props.xdomain,this.props.ydomain,t,o)},m.prototype.set_axlim=function(o,s,r,a){o=e(o)?this.xdom.domain():o,s=e(s)?this.ydom.domain():s,r=e(r)?750:r,a=i(a)?!0:a;var n="date"===this.props.xscale?A.interpolateDates(this.xdom.domain(),o):t.interpolate(this.xdom.domain(),o),p="date"===this.props.yscale?A.interpolateDates(this.ydom.domain(),s):t.interpolate(this.ydom.domain(),s),h=function(t){this.zoom_x.x(this.xdom.domain(n(t))),this.zoom_y.y(this.ydom.domain(p(t))),this.zoomed(!1)}.bind(this);t.select({}).transition().duration(r).tween("zoom",function(){return h}),a&&(this.sharex.forEach(function(t){t.set_axlim(o,null,r,!1)}),this.sharey.forEach(function(t){t.set_axlim(null,s,r,!1)})),this.zoom.scale(1).translate([0,0]),this.zoom.last_t=this.zoom.translate(),this.zoom.last_s=this.zoom.scale(),this.zoom_x.scale(1).translate([0,0]),this.zoom_y.scale(1).translate([0,0])},A.Toolbar=g,g.prototype=Object.create(v.prototype),g.prototype.constructor=g,g.prototype.defaultProps={buttons:["reset","move"]},g.prototype.buttonDict={},g.prototype.addButton=function(t){var o=this.buttonDict[t];"undefined"==typeof o?console.warn("Skipping unrecognized Button type '"+t+"'."):this.buttons.push(new o(this,t))},g.prototype.draw=function(){function o(){this.buttonsobj.transition(750).attr("y",0)}function s(){this.buttonsobj.transition(750).delay(250).attr("y",16)}A.insert_css("div#"+this.fig.figid+" .mpld3-toolbar image",{cursor:"pointer",opacity:.2,display:"inline-block",margin:"0px"}),A.insert_css("div#"+this.fig.figid+" .mpld3-toolbar image.active",{opacity:.4}),A.insert_css("div#"+this.fig.figid+" .mpld3-toolbar image.pressed",{opacity:.6}),this.fig.canvas.on("mouseenter",o.bind(this)).on("mouseleave",s.bind(this)).on("touchenter",o.bind(this)).on("touchstart",o.bind(this)),this.toolbar=this.fig.canvas.append("svg:svg").attr("width",16*this.buttons.length).attr("height",16).attr("x",2).attr("y",this.fig.height-16-2).attr("class","mpld3-toolbar"),this.buttonsobj=this.toolbar.append("svg:g").selectAll("buttons").data(this.buttons).enter().append("svg:image").attr("class",function(t){return t.cssclass}).attr("xlink:href",function(t){return t.icon()}).attr("width",16).attr("height",16).attr("x",function(t,o){return 16*o}).attr("y",16).on("click",function(t){t.click()}).on("mouseenter",function(){t.select(this).classed({active:1})}).on("mouseleave",function(){t.select(this).classed({active:0})});for(var i=0;i<this.buttons.length;i++)this.buttons[i].onDraw()},g.prototype.deactivate_all=function(){this.buttons.forEach(function(t){t.deactivate()})},g.prototype.deactivate_by_action=function(t){function o(o){return-1!==t.indexOf(o)}t.length>0&&this.buttons.forEach(function(t){t.actions.filter(o).length>0&&t.deactivate()})},A.Button=x,x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.prototype.click=function(){this.active?this.deactivate():this.activate()},x.prototype.activate=function(){this.toolbar.deactivate_by_action(this.actions),this.onActivate(),this.active=!0,this.toolbar.toolbar.select("."+this.cssclass).classed({pressed:!0}),this.sticky||this.deactivate()},x.prototype.deactivate=function(){this.onDeactivate(),this.active=!1,this.toolbar.toolbar.select("."+this.cssclass).classed({pressed:!1})},x.prototype.sticky=!1,x.prototype.actions=[],x.prototype.icon=function(){return""},x.prototype.onActivate=function(){},x.prototype.onDeactivate=function(){},x.prototype.onDraw=function(){},A.ButtonFactory=function(t){function o(t,o){x.call(this,t,o)}o.prototype=Object.create(x.prototype),o.prototype.constructor=o;for(key in t)o.prototype[key]=t[key];return A.Toolbar.prototype.buttonDict[t.toolbarKey]=o,o},A.ResetButton=A.ButtonFactory({toolbarKey:"reset",sticky:!1,onActivate:function(){this.toolbar.fig.reset()},icon:function(){return A.icons.reset}}),A.MoveButton=A.ButtonFactory({toolbarKey:"move",sticky:!0,actions:["scroll","drag"],onActivate:function(){this.toolbar.fig.enable_zoom()},onDeactivate:function(){this.toolbar.fig.disable_zoom()},onDraw:function(){this.toolbar.fig.disable_zoom()},icon:function(){return A.icons.move}}),A.Figure=b,b.prototype=Object.create(v.prototype),b.prototype.constructor=b,b.prototype.requiredProps=["width","height"],b.prototype.defaultProps={data:{},axes:[],plugins:[],toolbar:["reset","move"]},b.prototype.add_plugin=function(t){var o=t.type;if(o in A.plugin_map&&(o=A.plugin_map[o]),"function"!=typeof o)return void console.warn("Skipping unrecognized plugin: "+o);if(t.clear_toolbar&&(this.props.toolbar=[]),"buttons"in t)if("string"==typeof t.buttons)this.props.toolbar.push(t.buttons);else for(var s=0;s<t.buttons.length;s++)this.props.toolbar.push(t.buttons[s]);this.plugins.push(new o(this,t))},b.prototype.draw=function(){this.canvas=this.root.append("svg:svg").attr("class","mpld3-figure").attr("width",this.width).attr("height",this.height);for(var t=0;t<this.axes.length;t++)this.axes[t].draw();this.enable_zoom();for(var t=0;t<this.plugins.length;t++)this.plugins[t].draw();this.toolbar.draw()},b.prototype.reset=function(t){this.axes.forEach(function(o){o.reset(t,!1)})},b.prototype.enable_zoom=function(){for(var t=0;t<this.axes.length;t++)this.axes[t].enable_zoom();this.zoom_on=!0},b.prototype.disable_zoom=function(){for(var t=0;t<this.axes.length;t++)this.axes[t].disable_zoom();this.zoom_on=!1},b.prototype.toggle_zoom=function(){this.zoom_on?this.disable_zoom():this.enable_zoom()},b.prototype.get_data=function(t){return null===t||"undefined"==typeof t?null:"string"==typeof t?this.data[t]:t},A.PlotElement=v,v.prototype.requiredProps=[],v.prototype.defaultProps={},v.prototype.processProps=function(t){finalProps={},this.requiredProps.forEach(function(o){if(!(o in t))throw"property '"+o+"' must be specified for "+this.name();finalProps[o]=t[o],delete t[o]});for(var o in this.defaultProps)o in t?(finalProps[o]=t[o],delete t[o]):finalProps[o]=this.defaultProps[o];"id"in t?(finalProps.id=t.id,delete t.id):"id"in finalProps||(finalProps.id=A.generateId());for(var o in t)console.warn("Unrecognized property '"+o+"' for object "+this.name()+" (value = "+t[o]+").");return finalProps},v.prototype.name=function(){var t=/function (.{1,})\(/,o=t.exec(this.constructor.toString());return o&&o.length>1?o[1]:""},A.TooltipPlugin=z,z.prototype=Object.create(v.prototype),z.prototype.constructor=z,z.prototype.requiredProps=["id"],z.prototype.defaultProps={type:"tooltip",labels:null,hoffset:0,voffset:10,location:"mouse"},z.prototype.draw=function(){function o(t,o){this.tooltip.style("visibility","visible").text(null===a?"("+t[0]+", "+t[1]+")":r(a,o))}function s(){if("mouse"===n){var o=t.mouse(this.fig.canvas.node());this.x=o[0]+this.props.hoffset,this.y=o[1]-this.props.voffset}this.tooltip.attr("x",this.x).attr("y",this.y)}function i(){this.tooltip.style("visibility","hidden")}var e=A.get_element(this.props.id,this.fig),a=this.props.labels,n=this.props.location;this.tooltip=this.fig.canvas.append("text").attr("class","mpld3-tooltip-text").attr("x",0).attr("y",0).text("").style("visibility","hidden"),"bottom left"==n||"top left"==n?(this.x=e.ax.position[0]+5+this.props.hoffset,this.tooltip.style("text-anchor","beginning")):"bottom right"==n||"top right"==n?(this.x=e.ax.position[0]+e.ax.width-5+this.props.hoffset,this.tooltip.style("text-anchor","end")):this.tooltip.style("text-anchor","middle"),"bottom left"==n||"bottom right"==n?this.y=e.ax.position[1]+e.ax.height-5+this.props.voffset:("top left"==n||"top right"==n)&&(this.y=e.ax.position[1]+5+this.props.voffset),e.elements().on("mouseover",o.bind(this)).on("mousemove",s.bind(this)).on("mouseout",i.bind(this))},A.register_plugin("tooltip",A.TooltipPlugin),"function"==typeof define&&define.amd?define(A):"object"==typeof module&&module.exports?module.exports=A:this.mpld3=A,console.log("Loaded mpld3 version "+A.version)}(d3);